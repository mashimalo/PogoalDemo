{"version":3,"sources":["api-leaderboard.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"api-leaderboard.min.js","sourcesContent":["$(function(){\n    // DIV Cache\n    var $body = $(\"body\");\n\n    // Filter Cache\n    var $leaderboardFilterTopUsers = \"#leaderboard-filter-topUsers\";\n    var $leaderboardFilterTopGroups = \"#leaderboard-filter-topGroups\";\n    var $leaderboardFilterTopUsersList = \"#leaderboard-filter-topUsers ul\";\n    var $leaderboardFilterTopGroupsList = \"#leaderboard-filter-topGroups ul\";\n    var $leaderboardFilterTopUsersChild = \"#leaderboard-filter-topUsers ul li\";\n    var $leaderboardFilterTopGroupsChild = \"#leaderboard-filter-topGroups ul li\";\n\n    // Result Cache\n    var $leaderboardTopUsers = \"#leaderboard-topUsers\";\n    var $leaderboardTopGroups = \"#leaderboard-topGroups\";\n    var $leaderboardTopUsersList = \"#leaderboard-result-topUsers\";\n    var $leaderboardTopGroupsList = \"#leaderboard-result-topGroups\";\n    var $leaderboardTopUsersChild = \"#leaderboard-result-topUsers li\";\n    var $leaderboardTopGroupsChild = \"#leaderboard-result-topGroups li\";\n\n    // Action Cache\n    var $leaderboardFilterTopUsersButton = \"[data-action='leaderboard-filter-topUsers']\";\n    var $leaderboardFilterTopGroupsButton = \"[data-action='leaderboard-filter-topGroups']\";\n\n    // Attributes Cache\n    var $csrf_token = $(\"meta[name=_token]\").attr(\"content\");\n\n    /*--------------------------------------------------------------------------\n     | Top Users Filter\n     --------------------------------------------------------------------------*/\n    $body.on(\"click\", $leaderboardFilterTopUsersButton, function () {\n\n        // Cache\n        var $this = $(this);\n        var $filterName = $this.html();\n        var $group_type_id = $this.attr(\"data-group-type-id\");\n\n        // Empty List\n        $($leaderboardTopUsersList).empty();\n\n        // Add Loading\n        $($leaderboardTopUsersList).append(\n            '<li class=\"pH--md lk-block\"><div class=\"pV--md loading\">' +\n            '&nbsp;<div class=\"hidden-text\">Loading</div>' +\n            '</div></li>'\n        );\n\n        // Close Filter List\n        $($leaderboardFilterTopUsers).slideToggle();\n        $this.closest(\".leaderboard__column\").find(\".leaderboard__filter__container\").removeClass(\"toggled\");\n\n        // AJAX\n        $.ajaxSetup({\n            headers: {\n                'X-CSRF-TOKEN': $csrf_token\n            }\n        });\n        $.ajax({\n            url: \"leaderboard/topusers/\" + $group_type_id,\n            type: \"GET\",\n            dataType: \"json\",\n            success: function (data) {\n\n                // Empty List\n                $($leaderboardTopUsersList).empty();\n\n                // Loop\n                $.each(jQuery.parseJSON(data.json), function (index, item) {\n\n                    // Data Cache\n                    var $data = {\n                        user_name: \"Test\",\n                        user_link: \"http://test.com\",\n                        user_id: item.user_id,\n                        amount: item.amount\n                    };\n\n                    // Dynamic data key cache - avatar\n                    if(item.user_avatar == null){\n                        var $profileAvatar = '<img data-name=\"' + item.user_name + '\" class=\"initialAvatar avatar avatar--md rounded\"/>';\n                    } else {\n                        var $profileAvatar = '<img scr=\"' + item.user_avatar + '\" class=\"initialAvatar avatar avatar--md rounded\"/>';\n                    }\n                    $data[\"user_avatar\"] = $profileAvatar;\n\n                    // Get template\n                    $.get('/api/leaderboard-topUsers-list-v000006.template', function (template) {\n                        var $leaderboardTopUsersTemplate = Mustache.render(template, $data);\n                        \n                        // prepend it to list\n                        $($leaderboardTopUsersList).append($leaderboardTopUsersTemplate);\n\n                        // Execute external functions\n                        initialAvatar();\n                    });\n\n                });\n\n                // Replace .leaderboard__filter__current content\n                $this.closest(\".leaderboard__column\").find(\".leaderboard__filter__current\").html($filterName);\n\n            }\n        });\n\n    });\n\n    /*--------------------------------------------------------------------------\n     | Top Groups Filter\n     --------------------------------------------------------------------------*/\n    $body.on(\"click\", $leaderboardFilterTopGroupsButton, function () {\n\n        // Cache\n        var $this = $(this);\n        var $filterName = $this.html();\n        var $group_type_id = $this.attr(\"data-group-type-id\");\n\n        // Empty List\n        $($leaderboardTopGroupsList).empty();\n\n        // Add Loading\n        $($leaderboardTopGroupsList).append(\n            '<li class=\"pH--md lk-block\"><div class=\"pV--md loading\">' +\n            '&nbsp;<div class=\"hidden-text\">Loading</div>' +\n            '</div></li>'\n        );\n\n        // Close Filter List\n        $($leaderboardFilterTopGroups).slideToggle();\n        $this.closest(\".leaderboard__column\").find(\".leaderboard__filter__container\").removeClass(\"toggled\");\n\n        // AJAX\n        $.ajaxSetup({\n            headers: {\n                'X-CSRF-TOKEN': $csrf_token\n            }\n        });\n        $.ajax({\n            url: \"leaderboard/topgroups/\" + $group_type_id,\n            type: \"GET\",\n            dataType: \"json\",\n            success: function (data) {\n\n                // Empty List\n                $($leaderboardTopGroupsList).empty();\n\n                // Loop\n                $.each(jQuery.parseJSON(data.json), function (index, item) {\n\n                    // Data Cache\n                    var $data = {\n                        group_name: \"Test\",\n                        group_link: \"http://test.com\",\n                        group_type: \"Test\",\n                        group_id: item.group_id,\n                        amount: item.amount\n                    };\n\n                    // Dynamic data key cache - avatar\n                    if(item.group_avatar == null){\n                        var $groupAvatar = '<img class=\"avatar avatar--md rounded\" src=\"/assets/images/avatar.jpg\">';\n                    } else {\n                        var $groupAvatar = '<img class=\"initialAvatar avatar avatar--md rounded\" scr=\"' + item.group_avatar + '\">';\n                    }\n                    $data[\"group_avatar\"] = $groupAvatar;\n\n                    // Get template\n                    $.get('/api/leaderboard-topGroups-list-v000001.template', function (template) {\n                        var $leaderboardTopGroupsTemplate = Mustache.render(template, $data);\n\n                        // prepend it to list\n                        $($leaderboardTopGroupsList).append($leaderboardTopGroupsTemplate);\n                    });\n\n                });\n\n                // Replace .leaderboard__filter__current content\n                $this.closest(\".leaderboard__column\").find(\".leaderboard__filter__current\").html($filterName);\n\n            }\n        });\n\n    });\n});"],"sourceRoot":"/source/"}