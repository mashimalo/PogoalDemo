{"version":3,"sources":["api-leaderboard.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"api-leaderboard.min.js","sourcesContent":["$(function () {\n    // DIV Cache\n    var $body = $(\"body\");\n\n    // Filter Cache\n    var $leaderboardFilterTopUsers = \"#leaderboard-filter-topUsers\";\n    var $leaderboardFilterTopGroups = \"#leaderboard-filter-topGroups\";\n    var $leaderboardFilterTopUsersList = \"#leaderboard-filter-topUsers ul\";\n    var $leaderboardFilterTopGroupsList = \"#leaderboard-filter-topGroups ul\";\n    var $leaderboardFilterTopUsersChild = \"#leaderboard-filter-topUsers ul li\";\n    var $leaderboardFilterTopGroupsChild = \"#leaderboard-filter-topGroups ul li\";\n\n    // Result Cache\n    var $leaderboardTopUsers = \"#leaderboard-topUsers\";\n    var $leaderboardTopGroups = \"#leaderboard-topGroups\";\n    var $leaderboardTopUsersList = \"#leaderboard-result-topUsers\";\n    var $leaderboardTopGroupsList = \"#leaderboard-result-topGroups\";\n    var $leaderboardTopUsersChild = \"#leaderboard-result-topUsers li\";\n    var $leaderboardTopGroupsChild = \"#leaderboard-result-topGroups li\";\n\n    // Action Cache\n    var $leaderboardFilterTopUsersButton = \"[data-action='leaderboard-filter-topUsers']\";\n    var $leaderboardFilterTopGroupsButton = \"[data-action='leaderboard-filter-topGroups']\";\n\n    // Attributes Cache\n    var $csrf_token = $(\"meta[name=_token]\").attr(\"content\");\n\n    /*--------------------------------------------------------------------------\n     | Top Users Filter\n     --------------------------------------------------------------------------*/\n    $body.on(\"click\", $leaderboardFilterTopUsersButton, function () {\n\n        // Cache\n        var $this = $(this);\n        var $filterName = $this.html();\n        var $group_type_id = $this.attr(\"data-group-type-id\");\n\n        // Empty List\n        $($leaderboardTopUsersList).empty();\n\n        // Add Loading\n        $($leaderboardTopUsersList).append(\n            '<li class=\"pH--md lk-block\"><div class=\"pV--md loading\">' +\n            '&nbsp;<div class=\"hidden-text\">Loading</div>' +\n            '</div></li>'\n        );\n\n        // Close Filter List\n        $($leaderboardFilterTopUsers).slideToggle();\n        $this.closest(\".leaderboard__column\").find(\".leaderboard__filter__container\").removeClass(\"toggled\");\n\n        // AJAX\n        $.ajaxSetup({\n            headers: {\n                'X-CSRF-TOKEN': $csrf_token\n            }\n        });\n        $.ajax({\n            url: \"/leaderboard/topusers/\" + $group_type_id,\n            type: \"GET\",\n            dataType: \"json\",\n            success: function (data) {\n\n                // Empty List\n                $($leaderboardTopUsersList).empty();\n\n                // Loop\n                $.each(jQuery.parseJSON(data.json), function (index, item) {\n\n                    // Data Cache\n                    var $data = {\n                        amount: item.amount\n                    };\n\n                    // Dynamic data key cache - name\n                    if (item.firstName.length == 0 || item.lastName.length == 0) {\n                        var $user_name = item.nickName;\n                    } else {\n                        var $user_name = item.firstName + '&nbsp;' + item.lastName;\n                    }\n                    $data[\"user_name\"] = $user_name;\n\n                    // Dynamic data key cache - link\n                    $data[\"user_link\"] = $baseURL + '/' + item.nickName + '/profile';\n\n                    // Dynamic data key cache - avatar\n                    var $user_avatar = $baseURL + '/images/userAvatar/' + item.userAvatarSmall;\n                    $data[\"user_avatar\"] = $user_avatar;\n\n                    // Dynamic data key cache - initial avatar\n                    if (item.userAvatarSmall == null) {\n                        var $user_initialAvatar = \"initialAvatar\";\n                    }\n                    $data[\"user_initialAvatar\"] = $user_initialAvatar;\n\n                    // Get template\n                    $.get('/api/leaderboard-topUsers-list-v000008.template', function (template) {\n                        var $leaderboardTopUsersTemplate = Mustache.render(template, $data);\n\n                        // prepend it to list\n                        $($leaderboardTopUsersList).append($leaderboardTopUsersTemplate);\n\n                        // Execute external functions\n                        initialAvatar();\n                    });\n\n                });\n\n                // Replace .leaderboard__filter__current content\n                $this.closest(\".leaderboard__column\").find(\".leaderboard__filter__current\").html($filterName);\n\n            }\n        });\n\n    });\n\n    /*--------------------------------------------------------------------------\n     | Top Groups Filter\n     --------------------------------------------------------------------------*/\n    $body.on(\"click\", $leaderboardFilterTopGroupsButton, function () {\n\n        // Cache\n        var $this = $(this);\n        var $filterName = $this.html();\n        var $group_type_id = $this.attr(\"data-group-type-id\");\n\n        // Empty List\n        $($leaderboardTopGroupsList).empty();\n\n        // Add Loading\n        $($leaderboardTopGroupsList).append(\n            '<li class=\"pH--md lk-block\"><div class=\"pV--md loading\">' +\n            '&nbsp;<div class=\"hidden-text\">Loading</div>' +\n            '</div></li>'\n        );\n\n        // Close Filter List\n        $($leaderboardFilterTopGroups).slideToggle();\n        $this.closest(\".leaderboard__column\").find(\".leaderboard__filter__container\").removeClass(\"toggled\");\n\n        // AJAX\n        $.ajaxSetup({\n            headers: {\n                'X-CSRF-TOKEN': $csrf_token\n            }\n        });\n        $.ajax({\n            url: \"/leaderboard/topgroups/\" + $group_type_id,\n            type: \"GET\",\n            dataType: \"json\",\n            success: function (data) {\n\n                // Empty List\n                $($leaderboardTopGroupsList).empty();\n\n                // Loop\n                $.each(jQuery.parseJSON(data.json), function (index, item) {\n\n                    // Data Cache\n                    var $data = {\n                        group_name: item.groupName,\n                        amount: item.amount\n                    };\n\n                    // Dynamic data key cache - link\n                    $data[\"group_link\"] = $baseURL + '/group/' + item.group_id;\n\n                    // Dynamic data key cache - avatar\n                    if (item.groupAvatarSmall == null) {\n                        var $group_avatar = $baseURL + '/assets/images/avatar.jpg';\n                    } else {\n                        var $group_avatar = $baseURL + '/images/groupAvatar/' + item.groupAvatarSmall;\n                    }\n                    $data[\"group_avatar\"] = $group_avatar;\n\n                    // Get template\n                    $.get('/api/leaderboard-topGroups-list-v000004.template', function (template) {\n                        var $leaderboardTopGroupsTemplate = Mustache.render(template, $data);\n\n                        // prepend it to list\n                        $($leaderboardTopGroupsList).append($leaderboardTopGroupsTemplate);\n                    });\n\n                });\n\n                // Replace .leaderboard__filter__current content\n                $this.closest(\".leaderboard__column\").find(\".leaderboard__filter__current\").html($filterName);\n\n            }\n        });\n\n    });\n});"],"sourceRoot":"/source/"}