/*
 |--------------------------------------------------------------------------
 | Insert Feed Reply Form
 |--------------------------------------------------------------------------
 */
// $(function () {
//     $("button[data-action='insert-feed-reply-form']").one("click", function () {
//
//         // variables
//         var $this = $(this);
//         var $replyFormContainer = "<div class='uiFeed__reply__form'></div>";
//         var $thisContainer = $this.closest(".uiFeed__misc");
//         var $reply_group_id = $this.attr("data-reply-group-id");
//         var $reply_comment_id = $this.attr("data-reply-comment-id");
//         var $name = $this.attr("data-name");
//
//         // feed reply form template
//         var $replyForm = "<form role='form' data-toggle='validator' id='post-childComment' accept-charset='UTF-8' action='/group/" + $reply_group_id + "/" + $reply_comment_id + "/postChildComment' method='POST'>" +
//             "<input type='hidden' value='" + $('meta[name="_token"]').attr('content') + "' name='_token'>" +
//             "<img class='initialAvatar avatar avatar--md arc-sm mR--md pull-left' data-name='" + $name + "'>" +
//             "<input type='submit' value='Reply' required='required' placeholder='Reply...' class='btn btn-primary btn-md mL--md pull-right' id='sgp-feed-reply'>" +
//             "<div class='uiFeed__reply__form__input'>" +
//             "<div class='elastic-textarea'>" +
//             "<textarea data-elastic='textarea' class='form-control elastic-textarea__input' name='2ndReply-" + $reply_comment_id + "' placeholder='Reply......'></textarea>" +
//             "</div></div></form>";
//
//         // insert feed reply form container after .uiFeed__misc
//         $thisContainer.after($replyFormContainer);
//
//         // append feed reply form inside feed reply form container
//         $thisContainer.siblings(".uiFeed__reply__form").append($replyForm).hide().fadeIn(500);
//
//         // fire initialAvatar function
//         initialAvatar();
//
//         // fire elastic textarea function
//         // elasticTextarea();
//     });
// });


/*
 |--------------------------------------------------------------------------
 | Delete Feed
 |--------------------------------------------------------------------------
 */
// $(function () {
//     $("button[data-action='delete-feed']").one("click", function () {
//
//         // variables
//         var $this = $(this);
//
//         var $feed = $this.closest(".uiFeed");
//
//         var $group_id = $this.attr("data-group-id");
//         var $feed_id = $this.attr("data-feed-id");
//
//         // modal template
//         var $modalTemplate = "<div class='uiModal fade' id='delete-confirmation-" + $group_id + $feed_id + "'>" +
//             "<div class='uiModal__dialog uiModal--sm'>" +
//             "<div class='uiModal__content'>" +
//             "<div class='uiModal__header'><button class='close' data-dismiss='modal'><span>&times;</span></button><div class='h3 text-center'>Delete Feed</div></div>" +
//             "<div class='uiModal__body'>This feed will be permanent deleted, are you sure you want to delete it?</div>" +
//             "<div class='uiModal__footer text-right'><button class='btn btn-outline-gray' data-dismiss='modal'>Cancel</button><button class='btn btn-primary' data-dismiss='modal' data-action='delete-feed-confirmed'>Delete</button></div>" +
//             "</div></div></div>";
//
//         // append modal template to uiFeed
//         $feed.append($modalTemplate);
//
//         // add modal attribute to the delete button
//         $this.attr("data-toggle", "modal");
//         $this.attr("data-target", "#delete-confirmation-" + $group_id + $feed_id);
//
//         // click modal delete button to fire the ajax
//         $feed.find("button[data-action='delete-feed-confirmed']").one("click", function () {
//             $.ajaxSetup({
//                 headers: {
//                     'X-CSRF-TOKEN': $('meta[name="_token"]').attr('content')
//                 }
//             });
//             $.ajax({
//                 type: 'DELETE',
//                 data: {method: '_DELETE'},
//                 dataType: 'json',
//                 url: "/group/" + $group_id + "/" + $feed_id + "/delete",
//
//                 success: function () {
//                     $feed.fadeOut(500, function() {
//                         $(this).remove();
//                     });
//                 },
//                 error: function (data) {
//                     console.log(data);
//                 }
//             });
//         });
//
//     });
// });


/*
 |--------------------------------------------------------------------------
 | Delete Feed Comment
 |--------------------------------------------------------------------------
 */
// $(function () {
//     $("button[data-action='delete-feed-comment']").one("click", function () {
//
//         // variables
//         var $this = $(this);
//
//         var $feed_comment = $this.closest(".uiFeed__reply__item");
//
//         var $group_id = $this.attr("data-group-id");
//         var $feed_id = $this.attr("data-feed-id");
//         var $comment_id = $this.attr("data-comment-id");
//
//         // modal template
//         var $modalTemplate = "<div class='uiModal fade' id='delete-confirmation-" + $group_id + $feed_id + $comment_id + "'>" +
//             "<div class='uiModal__dialog uiModal--sm'>" +
//             "<div class='uiModal__content'>" +
//             "<div class='uiModal__header'><button class='close' data-dismiss='modal'><span>&times;</span></button><div class='h3 text-center'>Delete Reply</div></div>" +
//             "<div class='uiModal__body'>This Reply will be permanent deleted, are you sure you want to delete it?</div>" +
//             "<div class='uiModal__footer text-right'><button class='btn btn-outline-gray' data-dismiss='modal'>Cancel</button><button class='btn btn-primary' data-dismiss='modal' data-action='delete-feed-comment-confirmed'>Delete</button></div>" +
//             "</div></div></div>";
//
//         // append modal template to uiFeed__reply__item
//         $feed_comment.append($modalTemplate);
//
//         // add modal attribute to the delete button
//         $this.attr("data-toggle", "modal");
//         $this.attr("data-target", "#delete-confirmation-" + $group_id + $feed_id + $comment_id);
//
//         // click modal delete button to fire the ajax
//         $feed_comment.find("button[data-action='delete-feed-comment-confirmed']").one("click", function () {
//             $.ajaxSetup({
//                 headers: {
//                     'X-CSRF-TOKEN': $('meta[name="_token"]').attr('content')
//                 }
//             });
//             $.ajax({
//                 type: 'DELETE',
//                 data: {method: '_DELETE'},
//                 dataType: 'json',
//                 url: "/group/" + $group_id + "/" + $feed_id + "/comment/" + $comment_id + "/delete",
//
//                 success: function () {
//                     $feed_comment.fadeOut(500, function() {
//                         $(this).remove();
//                     });
//                 },
//                 error: function (data) {
//                     console.log(data);
//                 }
//             });
//         });
//
//     });
// });


/*
 |--------------------------------------------------------------------------
 | Delete Feed Child Comment
 |--------------------------------------------------------------------------
 */
$(function () {
    $("button[data-action='delete-feed-childComment']").one("click", function () {

        // variables
        var $this = $(this);

        var $feed_childComment = $this.closest(".uiFeed__reply__item");

        var $group_id = $this.attr("data-group-id");
        var $feed_id = $this.attr("data-feed-id");
        var $comment_id = $this.attr("data-comment-id");
        var $childComment_id = $this.attr("data-childComment-id");

        // modal template
        var $modalTemplate = "<div class='uiModal fade' id='delete-confirmation-" + $group_id + $feed_id + $comment_id + $childComment_id + "'>" +
            "<div class='uiModal__dialog uiModal--sm'>" +
            "<div class='uiModal__content'>" +
            "<div class='uiModal__header'><button class='close' data-dismiss='modal'><span>&times;</span></button><div class='h3 text-center'>Delete Reply</div></div>" +
            "<div class='uiModal__body'>This Reply will be permanent deleted, are you sure you want to delete it?</div>" +
            "<div class='uiModal__footer text-right'><button class='btn btn-outline-gray' data-dismiss='modal'>Cancel</button><button class='btn btn-primary' data-dismiss='modal' data-action='delete-feed-childComment-confirmed'>Delete</button></div>" +
            "</div></div></div>";

        // append modal template to uiFeed__reply__item
        $feed_childComment.append($modalTemplate);

        // add modal attribute to the delete button
        $this.attr("data-toggle", "modal");
        $this.attr("data-target", "#delete-confirmation-" + $group_id + $feed_id + $comment_id + $childComment_id);

        // click modal delete button to fire the ajax
        $feed_childComment.find("button[data-action='delete-feed-childComment-confirmed']").one("click", function () {
            $.ajaxSetup({
                headers: {
                    'X-CSRF-TOKEN': $('meta[name="_token"]').attr('content')
                }
            });
            $.ajax({
                type: 'DELETE',
                data: {method: '_DELETE'},
                dataType: 'json',
                url: "/group/" + $group_id + "/" + $feed_id + "/comment/" + $comment_id + "/childComment/" + $childComment_id + "/delete",

                success: function () {
                    $feed_childComment.fadeOut(500, function() {
                        $(this).remove();
                    });
                },
                error: function (data) {
                    console.log(data);
                }
            });
        });

    });
});


/*
 |--------------------------------------------------------------------------
 | Post Feed
 |--------------------------------------------------------------------------
 */
// $(function () {
//     $("button[data-action='post-feed']").off("click").on("click", function () {
//
//         //
//         var $this = $(this);
//         var $feed_list = $("#feeds-normal");
//         var $form = $this.parents(".rich-form");
//         var $form_body = $form.find(".rich-form-body");
//         var $textarea = $form.find("textarea");
//
//         var $group_id = $form.attr("data-group-id");
//         var $textarea_content = $textarea.val();
//
//         //
//         $this.attr('disabled','disabled');
//         $textarea.attr('disabled','disabled');
//
//         //
//         $.ajaxSetup({
//             headers: {
//                 'X-CSRF-TOKEN': $('meta[name="_token"]').attr('content')
//             }
//         });
//         $.ajax({
//             url: "/group/" + $group_id + "/postFeed",
//             type: "post",
//             dataType: "json",
//             data: {
//                 'feed': $textarea_content
//             },
//
//             success: function (data) {
//
//                 var $feedNewContent = data.json.content.nl2br();
//
//                 var $feedTemplate = "<div class='uiFeed'><div class='uiFeed__main'>" +
//                     "<a href='#' class='uiFeed__avatar'><img data-name='?' class='initialAvatar avatar avatar--md arc-sm'/></a>" +
//                     "<div class='uiFeed__details'>" +
//                     "<div class='uiFeed__details__author'><a href='?' class='break-word'>Name</a></div>" +
//                     "<div class='uiFeed__details__misc'><span class='uiFeed__details__misc__time'>Apr 27,2016</span></div>" +
//                     "</div>" +
//                     "<div class='uiFeed__article'>" +
//                     "<div class='uiFeed__article__text break-word'>" + $feedNewContent + "</div>" +
//                     "</div>" +
//                     "<div class='uiFeed__misc'>" +
//                     "<div class='pull-left forms--inline'>" +
//                     "<form id='like-feed' role='form' accept-charset='UTF-8' action='' method='POST'><button class='btn btn-sns' id='post-like-submit'><span class='icon icon-thumb-up'></span><span class='btn-sns__count'> 0</span></button></form>" +
//                     "<form id='unlike-feed' role='form' accept-charset='UTF-8' action='' method='POST'><button class='btn btn-sns' id='post-unlike-submit'><span class='icon icon-thumb-down'></span><span class='btn-sns__count'> 0</span></button></form>" +
//                     "<button class='btn btn-sns'><span class='icon icon-share'></span></button>" +
//                     "</div>" +
//                     "<div class='pull-right uiDropdown'>" +
//                     "<button class='btn btn-sns' data-toggle='dropdown'><span class='icon icon-gear text-light link'></span></button>" +
//                     "<ul class='uiDropdown__menu arrow--none'>" +
//                     "<li><button data-action='edit-feed' data-group-id='' data-feed-id=''>Edit</button></li>" +
//                     "<li><button data-action='delete-feed' data-group-id='' data-feed-id=''>Delete</button></li>" +
//                     "</ul>" +
//                     "</div></div></div>" +
//                     "<div class='uiFeed__footer inactive'><div class='uiFeed__footer__mask'>" +
//                     "<div class='uiFeed__reply__form'>" +
//                     "<form id='post-comment' role='form' data-toggle='validator' accept-charset='UTF-8' action='' method='POST' novalidate='true'>" +
//                     "<img data-name='?' class='initialAvatar avatar avatar--md arc-sm mR--md pull-left'/>" +
//                     "<input class='btn btn-primary btn-md mL--md pull-right' type='submit' value='Reply'>" +
//                     "<div class='uiFeed__reply__form__input'><div class='elastic-textarea elastic-textarea--hasBtn'>" +
//                     "<textarea placeholder='Reply......' name='reply-' class='form-control elastic-textarea__input' data-elastic='textarea'></textarea>" +
//                     "<div class='elastic-textarea__btn'><button class='btn btn-md icon icon-camera text-light'></button></div>" +
//                     "</div></div></form></div></div>" +
//                     "<div class='uiFeed__footer__toggle text-center'><span class='icon icon-comments mR'></span><span class='btn-sns__count'> 0</span></div>" +
//                     "</div></div>";
//
//                 //
//                 $feed_list.prepend($feedTemplate).hide().fadeIn(500);
//
//                 //
//                 $this.removeAttr("disabled");
//                 $textarea.removeAttr("disabled");
//                 $textarea.val("");
//                 $form_body.removeClass("active");
//
//             },
//             error: function (data) {
//                 console.log(data);
//
//                 //
//                 $this.removeAttr("disabled");
//                 $textarea.removeAttr("disabled");
//             }
//         });
//
//     });
// });


/*
 |--------------------------------------------------------------------------
 | Edit Feed
 |--------------------------------------------------------------------------
 */
// $(function () {
//     $("button[data-action='edit-feed']").one("click", function () {
//
//         // variables
//         var $this = $(this);
//
//         var $feed = $this.closest(".uiFeed");
//         var $feed_content = $this.closest(".uiFeed").find(".uiFeed__main .uiFeed__article__text");
//         var $feed_original_content = $this.closest(".uiFeed").find(".uiFeed__main .uiFeed__article__text").text();
//
//         var $group_id = $this.attr("data-group-id");
//         var $feed_id = $this.attr("data-feed-id");
//
//         // modal template
//         var $modalTemplate = "<div class='uiModal fade' id='edit-feed-" + $group_id + $feed_id + "'>" +
//             "<div class='uiModal__dialog uiModal--md'>" +
//             "<div class='uiModal__content'>" +
//             "<div class='uiModal__header'><button class='close' data-dismiss='modal'><span>&times;</span></button><div class='h3 text-center'>Edit Feed</div></div>" +
//             "<div class='uiModal__body'><textarea id='feed_content' class='form-control h--md'>" + $feed_original_content + "</textarea></div>" +
//             "<div class='uiModal__footer text-right'><button class='btn btn-outline-gray' data-dismiss='modal'>Cancel</button><button class='btn btn-primary' data-dismiss='modal' data-action='edit-feed-confirmed'>Save</button></div>" +
//             "</div></div></div>";
//
//         // append modal template to uiFeed
//         $feed.append($modalTemplate);
//
//         // add modal attribute to the delete button
//         $this.attr("data-toggle", "modal");
//         $this.attr("data-target", "#edit-feed-" + $group_id + $feed_id);
//
//         $feed.find("button[data-action='edit-feed-confirmed']").off("click").on("click", function () {
//
//             //
//             var $feed_edited_content = $feed.find("#feed_content").val();
//
//             $.ajaxSetup({
//                 headers: {
//                     'X-CSRF-TOKEN': $('meta[name="_token"]').attr('content')
//                 }
//             });
//             $.ajax({
//                 url: "/group/" + $group_id + "/" + $feed_id + "/edit",
//                 type: 'PATCH',
//                 dataType: 'json',
//                 data: {
//                     'feed': $feed_edited_content
//                 },
//
//                 success: function (data) {
//                     var $feed_edited_new_content = data.json.content.nl2br();
//                     $feed_content.html($feed_edited_new_content);
//                 },
//                 error: function (data) {
//                     console.log('Error:', data);
//                 }
//
//             });
//         });
//     });
// });
//# sourceMappingURL=ajax.min.js.map
